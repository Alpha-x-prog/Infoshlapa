# Telegram Channel Monitor

Этот скрипт позволяет мониторить сообщения из Telegram каналов и сохранять их в базу данных.

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` в директории `telegram` со следующими переменными:
```
TELEGRAM_API_ID=ваш_api_id
TELEGRAM_API_HASH=ваш_api_hash
TELEGRAM_PHONE=ваш_номер_телефона
TELEGRAM_PASSWORD=ваш_пароль_2fa
```

Для получения API ID и API Hash:
1. Перейдите на https://my.telegram.org
2. Войдите в свой аккаунт
3. Перейдите в "API development tools"
4. Создайте новое приложение
5. Скопируйте API ID и API Hash

## Использование

1. Запустите скрипт:
```bash
python telegram_handler.py
```

2. При первом запуске вам нужно будет авторизоваться в Telegram. Следуйте инструкциям в консоли.

## Функциональность

- Автоматическое создание необходимых таблиц в базе данных
- Мониторинг сообщений из указанных каналов
- Сохранение сообщений в базу данных
- Логирование всех действий в файл `telegram_bot.log`

## Структура базы данных

### Таблица telegram_channels
- channel_id: ID канала
- channel_username: Имя пользователя канала
- channel_title: Название канала
- last_message_id: ID последнего обработанного сообщения
- added_at: Дата добавления канала
- is_active: Статус активности канала

### Таблица telegram_messages
- message_id: ID сообщения
- channel_id: ID канала
- message_text: Текст сообщения
- message_date: Дата сообщения
- media_url: URL медиафайла (если есть)

## Безопасность

- Все учетные данные хранятся в файле `.env`
- Файл `.env` добавлен в `.gitignore` и не должен попадать в систему контроля версий
- Рекомендуется использовать разные учетные данные для разработки и продакшена 